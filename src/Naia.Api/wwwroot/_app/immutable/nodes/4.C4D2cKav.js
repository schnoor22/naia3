import{d as Jt,f,a as c,s as d,c as yt}from"../chunks/Dyrg4-m5.js";import{p as Kt,d as l,l as Ot,o as Xt,c as a,s as o,t as T,g as e,a as Yt,b as n,r,f as ht}from"../chunks/CMoxswSl.js";import{i as $}from"../chunks/DBwLsdZZ.js";import{s as ot,e as Zt,i as te}from"../chunks/CoZh60iV.js";import{r as ee}from"../chunks/1tFsSi7w.js";import{b as ae}from"../chunks/Cw-6wO0J.js";import{b as st}from"../chunks/CcUDQLtG.js";var re=f('<div class="alert alert-error"> </div>'),oe=f('<tr><td colspan="4" class="text-center py-8 text-gray-500">Loading logs...</td></tr>'),se=f('<tr><td colspan="4" class="text-center py-8 text-gray-500">No logs found</td></tr>'),ne=f('<details class="mt-2"><summary class="cursor-pointer text-xs text-red-600 dark:text-red-400 hover:underline">View Exception</summary> <pre class="mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded text-xs overflow-x-auto"> </pre></details>'),ie=f('<tr class="hover:bg-gray-50 dark:hover:bg-gray-800/50"><td class="text-sm text-gray-500 dark:text-gray-400 font-mono"> </td><td><span> </span></td><td class="text-sm text-gray-600 dark:text-gray-400 font-mono"> </td><td><div> </div> <!></td></tr>'),le=f('<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">System Logs</h1> <p class="text-gray-500 dark:text-gray-400">Real-time structured logging from all services</p></div> <div class="flex items-center gap-2"><button> </button> <button class="btn btn-sm btn-secondary"> </button></div></div> <div class="card p-4"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div><label class="block text-sm font-medium mb-2">Level</label> <select class="input"><option>All</option><option>Debug</option><option>Information</option><option>Warning</option><option>Error</option><option>Fatal</option></select></div> <div><label class="block text-sm font-medium mb-2">Source</label> <select class="input"><option>All</option><option>Naia.Api</option><option>Naia.Ingestion</option><option>Naia.Infrastructure</option><option>Naia.PatternEngine</option><option>Naia.Connectors</option></select></div> <div><label class="block text-sm font-medium mb-2">Time Range</label> <select class="input"><option>Last 15 min</option><option>Last hour</option><option>Last 4 hours</option><option>Last 24 hours</option><option>Last 7 days</option></select></div> <div><label class="block text-sm font-medium mb-2">Search</label> <input type="text" placeholder="Search logs..." class="input"/></div></div></div> <!> <div class="card overflow-hidden"><div class="overflow-x-auto"><table class="table"><thead><tr><th class="w-40">Timestamp</th><th class="w-24">Level</th><th class="w-32">Source</th><th>Message</th></tr></thead><tbody><!></tbody></table></div> <div class="flex items-center justify-between p-4 border-t border-gray-200 dark:border-gray-700"><div class="text-sm text-gray-500 dark:text-gray-400"> </div> <div class="flex gap-2"><button class="btn btn-sm btn-secondary">Previous</button> <button class="btn btn-sm btn-secondary">Next</button></div></div></div></div>');function me(kt,wt){Kt(wt,!0);let M=l(Ot([])),x=l(0),w=l(!0),L=l(null),S=l("All"),A=l("All"),I=l(""),j=l(60),p=l(!0),i=l(0),g=100,b;async function u(){try{const t=new URLSearchParams;e(S)!=="All"&&t.set("level",e(S)),e(A)!=="All"&&t.set("source",e(A)),e(I)&&t.set("search",e(I)),t.set("minutes",e(j).toString()),t.set("skip",e(i).toString()),t.set("take",g.toString());const s=await fetch(`/api/logs?${t}`);if(!s.ok)throw new Error(`HTTP ${s.status}`);const m=await s.json();n(M,m.logs,!0),n(x,m.total,!0),n(L,null)}catch(t){n(L,t instanceof Error?t.message:"Failed to load logs",!0)}finally{n(w,!1)}}function Lt(t){switch(t==null?void 0:t.toLowerCase()){case"debug":return"text-gray-500 dark:text-gray-400";case"information":return"text-blue-600 dark:text-blue-400";case"warning":return"text-yellow-600 dark:text-yellow-400";case"error":return"text-red-600 dark:text-red-400";case"fatal":return"text-red-700 dark:text-red-500 font-bold";default:return"text-gray-600 dark:text-gray-300"}}function St(t){switch(t==null?void 0:t.toLowerCase()){case"debug":return"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300";case"information":return"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300";case"warning":return"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300";case"error":return"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300";case"fatal":return"bg-red-200 dark:bg-red-800 text-red-900 dark:text-red-200 font-bold";default:return"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300"}}function At(t){return new Date(t).toLocaleString()}function It(t){if(!t)return"Unknown";const s=t.split(".");return s[s.length-1]||t}Xt(()=>(u(),e(p)&&(b=setInterval(u,5e3)),()=>{b&&clearInterval(b)}));function N(){n(i,0),u()}function Nt(){n(p,!e(p)),e(p)?b=setInterval(u,5e3):b&&clearInterval(b)}function Rt(){e(i)>0&&(n(i,Math.max(0,e(i)-g),!0),u())}function Et(){e(i)+g<e(x)&&(n(i,e(i)+g),u())}var D=le(),U=a(D),nt=o(a(U),2),y=a(nt);y.__click=Nt;var Pt=a(y);r(y);var R=o(y,2);R.__click=u;var Ct=a(R,!0);r(R),r(nt),r(U);var B=o(U,2),it=a(B),H=a(it),lt=o(a(H),2);lt.__change=N,r(H);var Q=o(H,2),dt=o(a(Q),2);dt.__change=N,r(Q);var V=o(Q,2),E=o(a(V),2);E.__change=N;var W=a(E);W.value=W.__value=15;var q=o(W);q.value=q.__value=60;var z=o(q);z.value=z.__value=240;var G=o(z);G.value=G.__value=1440;var vt=o(G);vt.value=vt.__value=10080,r(E),r(V);var ct=o(V,2),J=o(a(ct),2);ee(J),J.__keyup=t=>t.key==="Enter"&&N(),r(ct),r(it),r(B);var ut=o(B,2);{var Ft=t=>{var s=re(),m=a(s,!0);r(s),T(()=>d(m,e(L))),c(t,s)};$(ut,t=>{e(L)&&t(Ft)})}var pt=o(ut,2),K=a(pt),gt=a(K),bt=o(a(gt)),Tt=a(bt);{var $t=t=>{var s=oe();c(t,s)},Mt=t=>{var s=yt(),m=ht(s);{var Dt=_=>{var P=se();c(_,P)},Ut=_=>{var P=yt(),Bt=ht(P);Zt(Bt,17,()=>e(M),te,(Ht,v)=>{var Y=ie(),Z=a(Y),Qt=a(Z,!0);r(Z);var tt=o(Z),et=a(tt),Vt=a(et,!0);r(et),r(tt);var at=o(tt),Wt=a(at,!0);r(at);var xt=o(at),C=a(xt),qt=a(C,!0);r(C);var zt=o(C,2);{var Gt=h=>{var k=ne(),F=o(a(k),2),rt=a(F,!0);r(F),r(k),T(()=>d(rt,e(v).exception)),c(h,k)};$(zt,h=>{e(v).exception&&h(Gt)})}r(xt),r(Y),T((h,k,F,rt)=>{d(Qt,h),ot(et,1,`px-2 py-1 text-xs font-medium rounded ${k??""}`),d(Vt,e(v).level),d(Wt,F),ot(C,1,`text-sm ${rt??""} font-mono`),d(qt,e(v).message)},[()=>At(e(v).timestamp),()=>St(e(v).level),()=>It(e(v).source),()=>Lt(e(v).level)]),c(Ht,Y)}),c(_,P)};$(m,_=>{e(M).length===0?_(Dt):_(Ut,!1)},!0)}c(t,s)};$(Tt,t=>{e(w)?t($t):t(Mt,!1)})}r(bt),r(gt),r(K);var mt=o(K,2),O=a(mt),jt=a(O);r(O);var _t=o(O,2),X=a(_t);X.__click=Rt;var ft=o(X,2);ft.__click=Et,r(_t),r(mt),r(pt),r(D),T(t=>{ot(y,1,`btn btn-sm ${e(p)?"btn-primary":"btn-secondary"}`),d(Pt,`${e(p)?"⏸":"▶"} Auto-refresh`),R.disabled=e(w),d(Ct,e(w)?"Loading...":"Refresh"),d(jt,`Showing ${e(i)+1} to ${t??""} of ${e(x)??""} logs`),X.disabled=e(i)===0,ft.disabled=e(i)+g>=e(x)},[()=>Math.min(e(i)+g,e(x))]),st(lt,()=>e(S),t=>n(S,t)),st(dt,()=>e(A),t=>n(A,t)),st(E,()=>e(j),t=>n(j,t)),ae(J,()=>e(I),t=>n(I,t)),c(kt,D),Yt()}Jt(["click","change","keyup"]);export{me as component};
