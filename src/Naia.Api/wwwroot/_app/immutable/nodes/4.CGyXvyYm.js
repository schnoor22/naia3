import{d as Oe,f as p,a as d,s as u,c as te,b as ue}from"../chunks/kWLYM50S.js";import{p as Qe,d as _,l as Te,o as Xe,f as R,s,t as z,a as Ze,b as o,c as r,r as a,g as e,n as ae,F as et}from"../chunks/FfWx4iUs.js";import{i as f}from"../chunks/BpnB5xfV.js";import{e as re,i as se,s as pe}from"../chunks/TdKr0dpg.js";import{s as tt}from"../chunks/C4XQzUGN.js";import{b as at}from"../chunks/BDu2iqcD.js";import{b as rt,e as st,f as it,r as ot,h as nt}from"../chunks/Bgoa3Iz2.js";import{p as dt,t as j}from"../chunks/DpakSfzu.js";var lt=p('<div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400"> </div>'),vt=p('<div class="card p-4"><div class="animate-pulse space-y-3"><div class="h-5 w-48 bg-gray-200 dark:bg-gray-700 rounded"></div> <div class="h-4 w-64 bg-gray-200 dark:bg-gray-700 rounded"></div> <div class="flex gap-2"><div class="h-6 w-16 bg-gray-200 dark:bg-gray-700 rounded"></div> <div class="h-6 w-24 bg-gray-200 dark:bg-gray-700 rounded"></div></div></div></div>'),ct=p('<div class="card p-12 text-center"><div class="mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">All caught up!</h3> <p class="text-gray-500 dark:text-gray-400 mt-1">No pending suggestions to review. New suggestions will appear as NAIA detects patterns in your data.</p></div>'),gt=p('<button class="card p-4 text-left hover:shadow-lg transition-shadow w-full"><div class="flex items-start justify-between"><div><h3 class="font-semibold text-gray-900 dark:text-gray-100"> </h3> <p class="text-sm text-gray-500 dark:text-gray-400 mt-1"> </p></div> <div class="flex items-center gap-3"><div class="text-right"><div class="text-sm text-gray-500">Confidence</div> <div> </div></div> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg></div></div></button>'),pt=p('<div class="p-8 text-center"><svg class="w-8 h-8 animate-spin mx-auto text-naia-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="mt-2 text-gray-500">Loading details...</p></div>'),ut=p('<div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"><div><div class="font-mono text-sm"> </div> <div class="text-xs text-gray-500"> </div></div> <span class="badge badge-info"> </span></div>'),ft=p('<span class="ml-1">*</span>'),xt=p("<span> <!></span>"),ht=p('<div><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-2">Pattern Roles</h4> <div class="flex flex-wrap gap-2"></div></div>'),mt=ue('<svg class="w-4 h-4 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>'),yt=ue('<svg class="w-4 h-4 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>'),_t=ue('<svg class="w-4 h-4 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>'),wt=p(`<div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800"><div><h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100"> </h3> <p class="text-sm text-gray-500"> </p></div> <button class="p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-4 space-y-4 max-h-[60vh] overflow-y-auto"><div class="flex items-center gap-4"><div class="flex-1"><div class="text-sm text-gray-500 mb-1">Confidence Score</div> <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"><div class="h-full bg-naia-500 transition-all"></div></div></div> <div> </div></div> <div><h4 class="font-medium text-gray-900 dark:text-gray-100 mb-2">Matched Points</h4> <div class="space-y-2"></div></div> <!> <div><label for="rejection-reason" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Rejection Reason (optional)</label> <textarea id="rejection-reason" class="input resize-none" rows="2" placeholder="Help NAIA learn why this pattern doesn't match..."></textarea></div></div> <div class="flex items-center justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50"><button class="btn btn-ghost"><!> Defer</button> <button class="btn btn-danger"><!> Reject</button> <button class="btn btn-success"><!> Approve</button></div>`,1),bt=p('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="bg-white dark:bg-gray-900 rounded-xl shadow-2xl w-full max-w-2xl m-4 max-h-[90vh] overflow-hidden"><!></div></div>'),kt=p(`<div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Pattern Review</h1> <p class="text-gray-500 dark:text-gray-400">Review and approve AI-detected patterns to help NAIA learn</p></div> <button class="btn btn-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg> Refresh</button></div> <!> <div class="card p-4 bg-naia-500/5 border-naia-500/20"><div class="flex items-start gap-3"><div class="p-2 bg-naia-500/10 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-naia-500"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"></path></svg></div> <div><h3 class="font-medium text-gray-900 dark:text-gray-100">How Pattern Learning Works</h3> <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">NAIA analyzes your data to detect equipment patterns. When you <strong>approve</strong> a suggestion, 
					the pattern confidence increases and NAIA learns to recognize similar configurations. 
					When you <strong>reject</strong>, NAIA learns to avoid similar false positives.</p></div></div></div> <div class="grid grid-cols-1 gap-4"><!></div></div> <!>`,1);function Bt(Ce,Me){Qe(Me,!0);let ie=_(Te([])),Ne=_(0),W=_(!0),$=_(null),i=_(null),Y=_(!1),G=_(""),c=_(null);async function S(){o(W,!0),o($,null);try{const t=await rt(0,50);o(ie,t.data,!0),o(Ne,t.total,!0),dt.set(t.total)}catch(t){o($,t instanceof Error?t.message:"Failed to load suggestions",!0)}finally{o(W,!1)}}async function Re(t){o(Y,!0);try{o(i,await st(t.id),!0)}catch(l){j.add({type:"error",title:"Failed to load details",message:l instanceof Error?l.message:"Unknown error"})}finally{o(Y,!1)}}async function ze(){if(e(i)){o(c,"approve");try{await nt(e(i).id),j.add({type:"success",title:"Pattern Approved!",message:"NAIA is learning from your feedback"}),o(i,null),S()}catch(t){j.add({type:"error",title:"Approval failed",message:t instanceof Error?t.message:"Unknown error"})}finally{o(c,null)}}}async function Se(){if(e(i)){o(c,"reject");try{await ot(e(i).id,e(G)||void 0),j.add({type:"info",title:"Feedback recorded",message:"NAIA will improve based on your rejection"}),o(i,null),o(G,""),S()}catch(t){j.add({type:"error",title:"Rejection failed",message:t instanceof Error?t.message:"Unknown error"})}finally{o(c,null)}}}async function Be(){if(e(i)){o(c,"defer");try{await it(e(i).id),j.add({type:"info",title:"Suggestion deferred",message:"You can review this later"}),o(i,null),S()}catch(t){j.add({type:"error",title:"Defer failed",message:t instanceof Error?t.message:"Unknown error"})}finally{o(c,null)}}}function fe(t){return`${Math.round(t*100)}%`}function De(t){return new Date(t).toLocaleString()}function xe(t){return t>=.8?"text-emerald-500":t>=.6?"text-amber-500":"text-red-500"}Xe(()=>{S()});var he=kt(),oe=R(he),ne=r(oe),me=s(r(ne),2);me.__click=S,a(ne);var ye=s(ne,2);{var Ie=t=>{var l=lt(),h=r(l,!0);a(l),z(()=>u(h,e($))),d(t,l)};f(ye,t=>{e($)&&t(Ie)})}var _e=s(ye,4),Le=r(_e);{var Pe=t=>{var l=te(),h=R(l);re(h,16,()=>Array(3),se,(B,J)=>{var x=vt();d(B,x)}),d(t,l)},Ee=t=>{var l=te(),h=R(l);{var B=x=>{var g=ct();d(x,g)},J=x=>{var g=te(),C=R(g);re(C,17,()=>e(ie),se,(de,w)=>{var m=gt();m.__click=()=>Re(e(w));var D=r(m),b=r(D),k=r(b),I=r(k,!0);a(k);var K=s(k,2),O=r(K);a(K),a(b);var Q=s(b,2),L=r(Q),A=s(r(L),2),P=r(A,!0);a(A),a(L),ae(2),a(Q),a(D),a(m),z((E,T,le)=>{u(I,e(w).patternName),u(O,`Detected ${E??""}`),pe(A,1,`text-lg font-bold ${T??""}`),u(P,le)},[()=>De(e(w).createdAt),()=>xe(e(w).confidence),()=>fe(e(w).confidence)]),d(de,m)}),d(x,g)};f(h,x=>{e(ie).length===0?x(B):x(J,!1)},!0)}d(t,l)};f(Le,t=>{e(W)?t(Pe):t(Ee,!1)})}a(_e),a(oe);var qe=s(oe,2);{var Fe=t=>{var l=bt();l.__click=()=>!e(c)&&o(i,null);var h=r(l);h.__click=g=>g.stopPropagation();var B=r(h);{var J=g=>{var C=pt();d(g,C)},x=g=>{var C=te(),de=R(C);{var w=m=>{var D=wt(),b=R(D),k=r(b),I=r(k),K=r(I,!0);a(I);var O=s(I,2),Q=r(O,!0);a(O),a(k);var L=s(k,2);L.__click=()=>o(i,null),a(b);var A=s(b,2),P=r(A),E=r(P),T=s(r(E),2),le=r(T);a(T),a(E);var ve=s(E,2),Ue=r(ve,!0);a(ve),a(P);var ce=s(P,2),we=s(r(ce),2);re(we,21,()=>e(i).matchedPoints,se,(n,v)=>{var M=ut(),U=r(M),y=r(U),N=r(y,!0);a(y);var V=s(y,2),Z=r(V);a(V),a(U);var ee=s(U,2),ge=r(ee);a(ee),a(M),z(H=>{u(N,e(v).pointName),u(Z,`Role: ${e(v).matchedRole??""}`),u(ge,`${H??""}%`)},[()=>Math.round(e(v).roleConfidence*100)]),d(n,M)}),a(we),a(ce);var be=s(ce,2);{var Ve=n=>{var v=ht(),M=s(r(v),2);re(M,21,()=>e(i).patternRoles,se,(U,y)=>{var N=xt();let V;var Z=r(N),ee=s(Z);{var ge=H=>{var Ke=ft();d(H,Ke)};f(ee,H=>{e(y).required&&H(ge)})}a(N),z(()=>{V=pe(N,1,"badge",null,V,{"badge-success":e(y).required,"badge-neutral":!e(y).required}),u(Z,`${e(y).roleName??""} `)}),d(U,N)}),a(M),a(v),d(n,v)};f(be,n=>{e(i).patternRoles.length>0&&n(Ve)})}var ke=s(be,2),Ae=s(r(ke),2);et(Ae),a(ke),a(A);var je=s(A,2),q=r(je);q.__click=Be;var He=r(q);{var We=n=>{var v=mt();d(n,v)};f(He,n=>{e(c)==="defer"&&n(We)})}ae(),a(q);var F=s(q,2);F.__click=Se;var $e=r(F);{var Ye=n=>{var v=yt();d(n,v)};f($e,n=>{e(c)==="reject"&&n(Ye)})}ae(),a(F);var X=s(F,2);X.__click=ze;var Ge=r(X);{var Je=n=>{var v=_t();d(n,v)};f(Ge,n=>{e(c)==="approve"&&n(Je)})}ae(),a(X),a(je),z((n,v)=>{u(K,e(i).patternName),u(Q,e(i).patternDescription||"Equipment pattern suggestion"),L.disabled=!!e(c),tt(le,`width: ${e(i).confidence*100}%`),pe(ve,1,`text-2xl font-bold ${n??""}`),u(Ue,v),q.disabled=!!e(c),F.disabled=!!e(c),X.disabled=!!e(c)},[()=>xe(e(i).confidence),()=>fe(e(i).confidence)]),at(Ae,()=>e(G),n=>o(G,n)),d(m,D)};f(de,m=>{e(i)&&m(w)},!0)}d(g,C)};f(B,g=>{e(Y)?g(J):g(x,!1)})}a(h),a(l),d(t,l)};f(qe,t=>{(e(i)||e(Y))&&t(Fe)})}z(()=>me.disabled=e(W)),d(Ce,he),Ze()}Oe(["click"]);export{Bt as component};
