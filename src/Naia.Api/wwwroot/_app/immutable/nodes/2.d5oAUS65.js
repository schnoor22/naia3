import{d as ve,f as y,a as p,s as m,b as pe}from"../chunks/Dyrg4-m5.js";import{p as ue,a as xe,r as s,c as n,s as a,g as t,t as L,d as k,l as Le,o as Be,f as Pe,b as x,n as I,u as d}from"../chunks/CMoxswSl.js";import{i as z}from"../chunks/DBwLsdZZ.js";import{s as he,a as me}from"../chunks/BHReAqjr.js";import{S as T,M as h}from"../chunks/C6sD9Tp7.js";import{i as je}from"../chunks/B6caqBWM.js";import{e as Ae,s as Ie}from"../chunks/CoZh60iV.js";import{t as ge,p as ce}from"../chunks/CWMOtrvn.js";import{k as Te,l as ze,m as Re}from"../chunks/8Sjc7fTO.js";var De=y('<p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> </p>'),He=y('<div class="flex items-start gap-3 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 min-w-[300px] max-w-[400px] pointer-events-auto animate-fadeIn"><div> </div> <div class="flex-1 min-w-0"><p class="font-medium text-gray-900 dark:text-gray-100"> </p> <!></div> <button class="flex-shrink-0 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),Ve=y('<div class="fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none"></div>');function Fe(R,D){ue(D,!1);const _=()=>me(ge,"$toasts",H),[H,V]=he(),M={success:"âœ“",error:"âœ•",warning:"âš ",info:"â„¹"},l={success:"bg-emerald-500",error:"bg-red-500",warning:"bg-amber-500",info:"bg-naia-500"};je();var c=Ve();Ae(c,5,_,o=>o.id,(o,g)=>{var f=He(),v=n(f),C=n(v,!0);s(v);var w=a(v,2),$=n(w),B=n($,!0);s($);var P=a($,2);{var j=b=>{var u=De(),F=n(u,!0);s(u),L(()=>m(F,t(g).message)),p(b,u)};z(P,b=>{t(g).message&&b(j)})}s(w);var S=a(w,2);S.__click=()=>ge.remove(t(g).id),s(f),L(()=>{Ie(v,1,`flex-shrink-0 w-6 h-6 ${l[t(g).type]??""} rounded-full flex items-center justify-center text-white text-xs font-bold`),m(C,M[t(g).type]),m(B,t(g).title)}),p(o,f)}),s(c),p(R,c),xe(),V()}ve(["click"]);var Qe=pe('<svg class="w-4 h-4 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ee=pe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"></path></svg>'),Ke=y('<div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-400"> </div>'),qe=y('<span class="bg-naia-500 text-white text-xs font-bold px-2 py-0.5 rounded-full"> </span>'),Ne=y('<!> <div class="space-y-6"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-gray-100">Dashboard</h1> <p class="text-gray-500 dark:text-gray-400">NAIA Industrial Historian Command Center</p></div> <div class="flex items-center gap-4"><span class="text-sm text-gray-400"> </span> <button class="btn btn-secondary btn-sm"><!> Refresh</button></div></div> <!> <section><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">System Health</h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><!> <!> <!> <!></div></section> <section><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">Ingestion Metrics</h2> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><!> <!> <!> <!></div></section> <section><div class="flex items-center justify-between mb-4"><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Pattern Learning</h2> <a href="/patterns" class="text-naia-500 hover:text-naia-600 text-sm font-medium">View all suggestions â†’</a></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div class="card p-5 border-l-4 border-naia-500"><p class="text-sm font-medium text-gray-500 dark:text-gray-400">Pending Review</p> <p class="mt-2 text-3xl font-bold text-naia-600 dark:text-naia-400 tabular-nums"> </p> <p class="mt-1 text-xs text-gray-500">Suggestions awaiting approval</p></div> <!> <!> <!></div></section> <section><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4">Quick Actions</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><a href="/points" class="card p-5 hover:shadow-lg transition-shadow group"><div class="flex items-center gap-4"><div class="p-3 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-blue-500"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"></path></svg></div> <div><h3 class="font-semibold text-gray-900 dark:text-gray-100">Browse Points</h3> <p class="text-sm text-gray-500 dark:text-gray-400">Search and manage historian tags</p></div></div></a> <a href="/trends" class="card p-5 hover:shadow-lg transition-shadow group"><div class="flex items-center gap-4"><div class="p-3 bg-emerald-500/10 rounded-lg group-hover:bg-emerald-500/20 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-emerald-500"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"></path></svg></div> <div><h3 class="font-semibold text-gray-900 dark:text-gray-100">View Trends</h3> <p class="text-sm text-gray-500 dark:text-gray-400">Chart historical time-series data</p></div></div></a> <a href="/patterns" class="card p-5 hover:shadow-lg transition-shadow group"><div class="flex items-center gap-4"><div class="p-3 bg-purple-500/10 rounded-lg group-hover:bg-purple-500/20 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-purple-500"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"></path></svg></div> <div class="flex-1"><div class="flex items-center gap-2"><h3 class="font-semibold text-gray-900 dark:text-gray-100">Review Patterns</h3> <!></div> <p class="text-sm text-gray-500 dark:text-gray-400">Approve AI pattern suggestions</p></div></div></a></div></section> <section class="card"><div class="card-header"><h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Pipeline Architecture</h2></div> <div class="card-body"><div class="flex flex-wrap items-center justify-center gap-4 text-sm"><div class="flex items-center gap-2 px-4 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg"><span>ğŸ­</span> <span class="font-medium">PI System</span></div> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg> <div class="flex items-center gap-2 px-4 py-2 bg-orange-50 dark:bg-orange-900/20 rounded-lg"><span>ğŸ“¡</span> <span class="font-medium">Kafka</span></div> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg> <div class="flex items-center gap-2 px-4 py-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg"><span>âš™ï¸</span> <span class="font-medium">Ingestion Worker</span></div> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg> <div class="flex flex-col gap-2"><div class="flex items-center gap-2 px-4 py-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-lg"><span>ğŸ“Š</span> <span class="font-medium">QuestDB</span></div> <div class="flex items-center gap-2 px-4 py-2 bg-red-50 dark:bg-red-900/20 rounded-lg"><span>âš¡</span> <span class="font-medium">Redis</span></div></div> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5 text-gray-400"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg> <div class="flex items-center gap-2 px-4 py-2 bg-naia-50 dark:bg-naia-900/20 rounded-lg border-2 border-naia-500"><span>ğŸ§ </span> <span class="font-medium text-naia-700 dark:text-naia-400">Pattern Engine</span></div></div> <p class="mt-6 text-center text-sm text-gray-500 dark:text-gray-400">The first historian that learns from you. Approve patterns â†’ AI improves â†’ Better suggestions.</p></div></section></div>',1);function tt(R,D){ue(D,!0);const _=()=>me(ce,"$pendingCount",H),[H,V]=he();let M=k(null),l=k(null),c=k(null),o=k(!0),g=k(null),f=k(Le(new Date));async function v(){try{const[e,r,i]=await Promise.all([Te().catch(()=>null),ze().catch(()=>null),Re().catch(()=>null)]);x(M,e,!0),x(l,r,!0),x(c,i,!0),i&&ce.set(i.pending),x(f,new Date,!0),x(g,null)}catch(e){x(g,e instanceof Error?e.message:"Failed to load data",!0)}finally{x(o,!1)}}Be(()=>{v();const e=setInterval(v,1e4);return()=>clearInterval(e)});function C(e){var i;if(!((i=t(M))!=null&&i.checks))return"unknown";const r=t(M).checks[e];return r?r.status==="healthy"?"healthy":"unhealthy":"unknown"}function w(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}function $(e){return e.toFixed(1)+"/s"}var B=Ne(),P=Pe(B);Fe(P,{});var j=a(P,2),S=n(j),b=a(n(S),2),u=n(b),F=n(u);s(u);var A=a(u,2);A.__click=v;var fe=n(A);{var we=e=>{var r=Qe();p(e,r)},be=e=>{var r=Ee();p(e,r)};z(fe,e=>{t(o)?e(we):e(be,!1)})}I(),s(A),s(b),s(S);var N=a(S,2);{var ke=e=>{var r=Ke(),i=n(r,!0);s(r),L(()=>m(i,t(g))),p(e,r)};z(N,e=>{t(g)&&e(ke)})}var Q=a(N,2),W=a(n(Q),2),G=n(W);{let e=d(()=>C("postgresql"));T(G,{get status(){return t(e)},title:"PostgreSQL",subtitle:"Metadata & Config",icon:"ğŸ˜",get loading(){return t(o)}})}var J=a(G,2);{let e=d(()=>C("questdb"));T(J,{get status(){return t(e)},title:"QuestDB",subtitle:"Time-Series Storage",icon:"ğŸ“Š",get loading(){return t(o)}})}var O=a(J,2);{let e=d(()=>C("redis"));T(O,{get status(){return t(e)},title:"Redis",subtitle:"Current Value Cache",icon:"âš¡",get loading(){return t(o)}})}var ye=a(O,2);{let e=d(()=>{var i;return(i=t(l))!=null&&i.isRunning?"healthy":"degraded"}),r=d(()=>{var i;return(i=t(l))!=null&&i.isRunning?"Streaming":"Stopped"});T(ye,{get status(){return t(e)},title:"Kafka Pipeline",get subtitle(){return t(r)},icon:"ğŸ“¡",get loading(){return t(o)}})}s(W),s(Q);var E=a(Q,2),U=a(n(E),2),X=n(U);{let e=d(()=>t(l)?$(t(l).pointsPerSecond):"â€”");h(X,{title:"Points/Second",get value(){return t(e)},icon:"ğŸ“ˆ",get loading(){return t(o)}})}var Y=a(X,2);{let e=d(()=>t(l)?w(t(l).totalPointsIngested):"â€”");h(Y,{title:"Total Ingested",get value(){return t(e)},icon:"ğŸ“¦",get loading(){return t(o)}})}var Z=a(Y,2);{let e=d(()=>t(l)?w(t(l).batchesProcessed):"â€”");h(Z,{title:"Batches Processed",get value(){return t(e)},icon:"âœ…",get loading(){return t(o)}})}var _e=a(Z,2);{let e=d(()=>{var r;return((r=t(l))==null?void 0:r.errors)??"â€”"});h(_e,{title:"Errors",get value(){return t(e)},icon:"âš ï¸",get loading(){return t(o)}})}s(U),s(E);var K=a(E,2),ee=a(n(K),2),q=n(ee),te=a(n(q),2),Me=n(te,!0);s(te),I(2),s(q);var re=a(q,2);{let e=d(()=>{var r;return((r=t(c))==null?void 0:r.approvedToday)??"â€”"});h(re,{title:"Approved Today",get value(){return t(e)},icon:"ğŸ‘",get loading(){return t(o)}})}var ae=a(re,2);{let e=d(()=>{var r;return((r=t(c))==null?void 0:r.rejectedToday)??"â€”"});h(ae,{title:"Rejected Today",get value(){return t(e)},icon:"ğŸ‘",get loading(){return t(o)}})}var Ce=a(ae,2);{let e=d(()=>t(c)?`${Math.round((t(c).averageConfidence??0)*100)}%`:"â€”");h(Ce,{title:"Avg Confidence",get value(){return t(e)},icon:"ğŸ¯",get loading(){return t(o)}})}s(ee),s(K);var se=a(K,2),ne=a(n(se),2),oe=a(n(ne),4),ie=n(oe),le=a(n(ie),2),de=n(le),$e=a(n(de),2);{var Se=e=>{var r=qe(),i=n(r,!0);s(r),L(()=>m(i,_())),p(e,r)};z($e,e=>{_()>0&&e(Se)})}s(de),I(2),s(le),s(ie),s(oe),s(ne),s(se),I(2),s(j),L(e=>{var r;m(F,`Last updated: ${e??""}`),A.disabled=t(o),m(Me,((r=t(c))==null?void 0:r.pending)??_())},[()=>t(f).toLocaleTimeString()]),p(R,B),xe(),V()}ve(["click"]);export{tt as component};
